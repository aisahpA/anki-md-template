
### 问题 1
下面代码是 Obsidian_to_anki 插件生成的，其中的 &gt; &lt; 直接反转义后会展示异常
```html
<pre><code class="hljs java language-java"><span class="hljs-keyword">public</span> <span
        class="hljs-keyword">class</span> <span class="hljs-title class_">NumberPair</span>&lt;U <span
        class="hljs-keyword">extends</span> <span class="hljs-title class_">Number</span>, V <span
        class="hljs-keyword">extends</span> <span class="hljs-title class_">Number</span>&gt; <span
        class="hljs-keyword">extends</span> <span class="hljs-title class_">Pair</span>&lt;U,V&gt; {
}
</code></pre>
```
原文为
```java
public class NumberPair<U extends Number, V extends Number> extends Pair<U,V> {
}
```
#### 解决方法
将`<code></code>`标签先替换为一个固定字符串`ANKI_CODE_REPLACE`，再调用 markdownit.render 方法，最后再替换回来。


### 问题 2
$2^{层数-1}$ 在 iOS 上解析失败
#### 原因
iOS 不能输出警告信息，因为没有 console.warn 方法
####  解决方法
初始化 markdownit 时，将 katexOptions 的 strict 添加一个错误回调函数，忽略错误，并将异常信息以`warn`级别输出到页面上。


### 问题 3
(C) 会被渲染成版权符号©
#### 解决方法 
初始化  markdownit 时，将 typographer 设置为 false


### 问题 4
在页面最后添加 div 输出日志信息，在切换到不是该模板的其他卡片时，日志信息div无法删除，会一直存在
#### 原因
Anki 只会更新`id=qa`的 div 中的内容），之前将日志信息放在了body最后面，没有正确删除日志
#### 解决方法
所有日志放在一个 `id="msgContainer"` 的 div 中，且放在`id="qa"`的 div 最后面


### 问题 5
安卓端 Anki 编辑的数学公式渲染失败
#### 原因
Anki 编辑的数学公式是由 `\(...\)` 或 `\[...\]` 包裹的，
安卓端是在模板文件执行完成后再转换的。而在转换 Markdown 格式时将公式的`\(`转义为`(`，导致公式异常
#### 解决方法
初始化 markdown-it 时，给`delimiters`添加公式标识`brackets`，安卓端的公式都由 katex 解析