
### 问题 1
下面代码是 Obsidian_to_anki 插件生成的，其中的 &gt; &lt; 直接反转义后会展示异常
```html
<pre><code class="hljs java language-java"><span class="hljs-keyword">public</span> <span
        class="hljs-keyword">class</span> <span class="hljs-title class_">NumberPair</span>&lt;U <span
        class="hljs-keyword">extends</span> <span class="hljs-title class_">Number</span>, V <span
        class="hljs-keyword">extends</span> <span class="hljs-title class_">Number</span>&gt; <span
        class="hljs-keyword">extends</span> <span class="hljs-title class_">Pair</span>&lt;U,V&gt; {
}
</code></pre>
```
原文为
```java
public class NumberPair<U extends Number, V extends Number> extends Pair<U,V> {
}
```
#### 解决方法
将`<code></code>`标签先替换为一个固定字符串`ANKI_CODE_REPLACE`，再调用 markdownit.render 方法，最后再替换回来。


### 问题 2
$2^{层数-1}$ 在 iOS 上解析失败
#### 原因
iOS 不能输出警告信息，因为没有 console.warn 方法
####  解决方法
初始化 markdownit 时，将 katexOptions 的 strict 添加一个错误回调函数，忽略错误，并将异常信息以`warn`级别输出到页面上。


### 问题 3
(C) 会被渲染成版权符号©
#### 解决方法 
初始化  markdownit 时，将 typographer 设置为 false


### 问题 4
在页面最后添加 div 输出日志信息，在切换到不是该模板的其他卡片时，日志信息div无法删除，会一直存在
#### 原因
Anki 只会更新`id=qa`的 div 中的内容，之前将日志信息放在了body最后面，没有正确删除日志
#### 解决方法
所有日志放在一个 `id="msgContainer"` 的 div 中，且放在`id="qa"`的 div 最后面


### 问题 5
安卓端 Anki 编辑的数学公式渲染失败
#### 原因
Anki 编辑的数学公式是由 `\(...\)` 或 `\[...\]` 包裹的，
安卓端是在模板文件执行完成后再转换的。而在转换 Markdown 格式时将公式的`\(`转义为`(`，导致公式异常
#### 解决方法
将`\(...\)` 或 `\[...\]` 包裹的数学公式在转换 markdown 格式前隐藏起来


### 问题 6
安卓端不能使用离线模式
#### 原因
安卓端有安全限制，不允许 js 加载本地文件
#### 解决方法
安卓端不支持离线模式


### 问题 7
卡片在切换时会有轻微的闪烁
#### 原因
在执行模板内容 js 的过程中，外层主逻辑已经将 div 显示出来
转换代码虽有设置 visibility: hidden !important; 但却不能完全控制显示隐藏
#### 解决方法
只在第一次执行的时候使用异步模式（主要是后续代码必须在获取 js 资源之后才能执行），
后面的卡片不用再加载资源，直接使用同步模式转换内容，避免了闪烁

